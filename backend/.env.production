# Haven Institute Backend - Production Environment
# SECURITY WARNING: This file contains production secrets
# Keep this file secure and never commit to version control

# Server Configuration
NODE_ENV=production
PORT=3001
API_VERSION=v1

# Database (MariaDB) - USE GITHUB SECRETS
DB_NAME=${DB_NAME}
DB_USER=${DB_USER}
DB_PASSWORD=${DB_PASSWORD}
DB_HOST=mariadb
DB_PORT=3306
DB_POOL_MAX=20
DB_POOL_MIN=5
DB_SSL=false

# Redis Configuration - USE GITHUB SECRETS
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}

# JWT - Cryptographically secure secrets (USE GITHUB SECRETS)
JWT_SECRET=${JWT_SECRET}
JWT_REFRESH_SECRET=${JWT_REFRESH_SECRET}
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# CORS Configuration (Production domains only)
CORS_ORIGIN=https://havenstudy.com,https://www.havenstudy.com

# AI Provider Configuration
AI_PROVIDER=openai
OPENAI_API_KEY=YOUR_OPENAI_API_KEY_HERE
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=1000

# DeepSeek Configuration (optional)
DEEPSEEK_API_KEY=YOUR_DEEPSEEK_API_KEY_HERE
DEEPSEEK_BASE_URL=https://api.deepseek.com

# Stripe Configuration (Production) - USE GITHUB SECRETS
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
STRIPE_PRO_MONTHLY_PRICE_ID=${STRIPE_PRO_MONTHLY_PRICE_ID}
STRIPE_PRO_YEARLY_PRICE_ID=${STRIPE_PRO_YEARLY_PRICE_ID}
STRIPE_PREMIUM_MONTHLY_PRICE_ID=${STRIPE_PREMIUM_MONTHLY_PRICE_ID}
STRIPE_PREMIUM_YEARLY_PRICE_ID=${STRIPE_PREMIUM_YEARLY_PRICE_ID}

# Email Configuration - USE GITHUB SECRETS
ENABLE_EMAIL=true
EMAIL_PROVIDER=zeptomail
ZOHO_SMTP_HOST=smtp.zeptomail.com
ZOHO_SMTP_PORT=587
ZOHO_SMTP_USER=emailapikey
ZOHO_SMTP_PASSWORD=${ZOHO_SMTP_PASSWORD}
ZOHO_FROM_EMAIL=info@havenstudy.com
ZOHO_FROM_NAME=Haven Institute

# Frontend URLs
FRONTEND_URL=https://havenstudy.com
ADMIN_URL=https://havenstudy.com/admin
PASSWORD_RESET_URL=https://havenstudy.com/reset-password

# Security Configuration - USE GITHUB SECRETS
BCRYPT_ROUNDS=12
SESSION_SECRET=${SESSION_SECRET}

# Account Lockout Configuration
MAX_FAILED_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30
PASSWORD_HISTORY_COUNT=5

# Rate Limiting (Stricter in production)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=50
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=10
MFA_RATE_LIMIT_WINDOW_MS=300000
MFA_RATE_LIMIT_MAX_REQUESTS=3
OAUTH_RATE_LIMIT_WINDOW_MS=300000
OAUTH_RATE_LIMIT_MAX_REQUESTS=5

# MFA Configuration
MFA_ISSUER=Haven Institute
MFA_BACKUP_CODES_COUNT=10

# OAuth Configuration (Production) - USE GITHUB SECRETS
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}

# Apple Sign-In Configuration - USE GITHUB SECRETS
APPLE_CLIENT_ID=com.haveninstitute.ios
APPLE_TEAM_ID=${APPLE_TEAM_ID}
APPLE_KEY_ID=${APPLE_KEY_ID}
APPLE_PRIVATE_KEY_PATH=/app/certs/apple_private_key.p8

# System Settings Encryption - USE GITHUB SECRETS
SETTINGS_ENCRYPTION_KEY=${SETTINGS_ENCRYPTION_KEY}

# File Upload Configuration
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# Logging Configuration
LOG_LEVEL=warn
LOG_FILE_PATH=./logs

# Monitoring & Health Checks
ENABLE_MONITORING=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# Performance Configuration
ENABLE_COMPRESSION=true
ENABLE_CACHING=true
CACHE_TTL=3600

# Security Headers
ENABLE_HELMET=true
ENABLE_CSP=true

# Feature Flags
ENABLE_AI_CHAT=true
ENABLE_PAYMENTS=true
ENABLE_EMAIL=true
