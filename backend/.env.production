# Haven Institute Backend - Production Environment
# SECURITY WARNING: This file contains production secrets
# Keep this file secure and never commit to version control

# Server Configuration
NODE_ENV=production
PORT=3001
API_VERSION=v1

# Database (MariaDB)
DB_NAME=haven_institute
DB_USER=haven_user
DB_PASSWORD=haven_password_123
DB_HOST=mariadb
DB_PORT=3306
DB_POOL_MAX=20
DB_POOL_MIN=5
DB_SSL=false

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis_secure_password_123

# JWT - Cryptographically secure secrets (64-character hex strings)
JWT_SECRET=21da0a7fbf8ae21075ff9096bf1780d03450d5c3beca73da4d74c191cd5f1b861b28d2476ee4b09007e200f6bcc3a2f196051cbd622ffae4c4a4e9317938bd36
JWT_REFRESH_SECRET=cee0d979095840f722759acebd6a74c17e413c40bed28e6d7bf120ba0894aba71305a3417fd51a2232b849951071fcd69e946a91075bb89a0f9d48ae2aa34a2c
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# CORS Configuration (Production domains only)
CORS_ORIGIN=https://havenstudy.com,https://www.havenstudy.com

# AI Provider Configuration
AI_PROVIDER=openai
OPENAI_API_KEY=YOUR_OPENAI_API_KEY_HERE
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=1000

# DeepSeek Configuration (optional)
DEEPSEEK_API_KEY=YOUR_DEEPSEEK_API_KEY_HERE
DEEPSEEK_BASE_URL=https://api.deepseek.com

# Stripe Configuration (Production)
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
STRIPE_PRO_MONTHLY_PRICE_ID=${STRIPE_PRO_MONTHLY_PRICE_ID}
STRIPE_PRO_YEARLY_PRICE_ID=${STRIPE_PRO_YEARLY_PRICE_ID}
STRIPE_PREMIUM_MONTHLY_PRICE_ID=${STRIPE_PREMIUM_MONTHLY_PRICE_ID}
STRIPE_PREMIUM_YEARLY_PRICE_ID=${STRIPE_PREMIUM_YEARLY_PRICE_ID}

# Email Configuration
ENABLE_EMAIL=true
EMAIL_PROVIDER=zeptomail
ZOHO_SMTP_HOST=smtp.zeptomail.com
ZOHO_SMTP_PORT=587
ZOHO_SMTP_USER=emailapikey
ZOHO_SMTP_PASSWORD=${ZOHO_SMTP_PASSWORD}
ZOHO_FROM_EMAIL=info@havenstudy.com
ZOHO_FROM_NAME=Haven Institute

# Frontend URLs
FRONTEND_URL=https://havenstudy.com
ADMIN_URL=https://havenstudy.com/admin
PASSWORD_RESET_URL=https://havenstudy.com/reset-password

# Security Configuration
BCRYPT_ROUNDS=12
SESSION_SECRET=7a9b2c4d5e6f8a1b3c5d7e9f2a4b6c8d9e1f3a5b7c9d2e4f6a8b1c3d5e7f9a2b4

# Account Lockout Configuration
MAX_FAILED_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30
PASSWORD_HISTORY_COUNT=5

# Rate Limiting (Stricter in production)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=50
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=10
MFA_RATE_LIMIT_WINDOW_MS=300000
MFA_RATE_LIMIT_MAX_REQUESTS=3
OAUTH_RATE_LIMIT_WINDOW_MS=300000
OAUTH_RATE_LIMIT_MAX_REQUESTS=5

# MFA Configuration
MFA_ISSUER=Haven Institute
MFA_BACKUP_CODES_COUNT=10

# OAuth Configuration (Production)
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}

# Apple Sign-In Configuration
APPLE_CLIENT_ID=com.haveninstitute.ios
APPLE_TEAM_ID=${APPLE_TEAM_ID}
APPLE_KEY_ID=${APPLE_KEY_ID}
APPLE_PRIVATE_KEY_PATH=/app/certs/apple_private_key.p8

# System Settings Encryption
SETTINGS_ENCRYPTION_KEY=9f8e7d6c5b4a3f2e1d0c9b8a7f6e5d4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e

# File Upload Configuration
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# Logging Configuration
LOG_LEVEL=warn
LOG_FILE_PATH=./logs

# Monitoring & Health Checks
ENABLE_MONITORING=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# Performance Configuration
ENABLE_COMPRESSION=true
ENABLE_CACHING=true
CACHE_TTL=3600

# Security Headers
ENABLE_HELMET=true
ENABLE_CSP=true

# Feature Flags
ENABLE_AI_CHAT=true
ENABLE_PAYMENTS=true
ENABLE_EMAIL=true
